<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quizmania</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    /* Tu CSS intacto */
    body {
      margin: 0;
      padding: 0;
      font-family: 'Arial Black', Arial, sans-serif;
      position: relative;
      min-height: 100vh;
      text-align: center;
      overflow-x: hidden;
      user-select: none;
      background-image: url('img/popo.png');
      background-repeat: no-repeat;
      background-size: cover;
      background-position: center center;
      background-attachment: fixed;
      position: relative;
      z-index: 0;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.35);
      z-index: -1;
    }
    h1 {
      font-family: 'Press Start 2P', cursive;
      font-size: 80px;
      margin-top: 30px;
      color: #7b1fa2;
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
      letter-spacing: 6px;
      transform: skewX(-5deg);
      animation: brillo-titulo 6s ease-in-out infinite;
      position: relative;
      z-index: 1;
    }
    @keyframes brillo-titulo {
      0%, 100% { text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);}
      50% {
        text-shadow:
          0 0 10px #fff,
          0 0 15px #ffee58,
          0 0 20px #fdd835;
      }
    }
    .boton-categoria {
      padding: 16px 28px;
      font-size: 20px;
      margin: 10px;
      border: none;
      border-radius: 20px;
      color: white;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
      position: relative;
      z-index: 1;
      background-color: #7b1fa2 !important;
    }
    .boton-categoria:active {
      transform: scale(0.96);
    }
    .boton-categoria:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      opacity: 0.95;
    }
    .boton-categoria:focus-visible {
      outline: 2px solid #000;
    }
    .cafe { background-color: #6D4C41; }
    .cuadro {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(230, 230, 255, 0.85));
      border-radius: 30px;
      padding: 30px 35px;
      margin: 25px auto;
      max-width: 800px;
      font-size: 24px;
      font-weight: 700;
      color: #2d1b4e;
      box-shadow: 0 12px 30px rgba(114, 21, 142, 0.22);
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      line-height: 1.4;
      text-align: left;
      position: relative;
      z-index: 1;
    }
    .cuadro:hover {
      transform: translateY(-5px);
      box-shadow: 0 18px 40px rgba(123, 31, 162, 0.35);
      background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(240, 230, 255, 0.95));
    }
    #pregunta {
      font-style: italic;
      color: #5e3e96;
    }
    #respuesta {
      font-style: normal;
      color: #3a176f;
      margin-top: 20px;
    }
    /* Botones de opciones selecci√≥n m√∫ltiple */
    .opcion {
      margin: 12px 0;
      display: flex;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }
    .opcion input[type="radio"] {
      accent-color: #8e24aa;
      width: 20px;
      height: 20px;
      margin-right: 12px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    .opcion input[type="radio"]:hover {
      transform: scale(1.2);
    }
    .opcion label {
      font-size: 20px;
      color: #4a148c;
      font-weight: 700;
      transition: color 0.3s ease;
    }
    .opcion:hover label {
      color: #7b1fa2;
    }
    /* Botones s√≠/no confirmaci√≥n */
    #confirmacion-puntos {
      margin-top: 20px;
      background: #f3e5f5;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 6px 15px rgba(156, 39, 176, 0.4);
      font-size: 18px;
      font-weight: bold;
      color: #4a148c;
      display: none;
      text-align: center;
      white-space: pre-line;
      position: relative;
      z-index: 1;
    }
    #mensaje-puntos {
      margin-top: 15px;
      font-size: 20px;
      color: #1b5e20;
      text-shadow: 1px 1px 2px #c8e6c9;
      position: relative;
      z-index: 1;
    }
    footer {
      font-size: 14px;
      color: #666;
      padding: 20px 0;
      text-align: center;
      position: relative;
      z-index: 1;
    }
    @media (max-width: 600px) {
      h1 {
        animation: none;
        font-size: 60px;
        text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.6);
      }
      .boton-categoria,
      #mostrar-respuesta {
        transition: none;
        box-shadow: none;
      }
      .cuadro {
        box-shadow: none;
        text-align: left;
        padding: 20px 25px;
        font-size: 20px;
        max-width: 90%;
        margin: 15px auto;
      }
    }
    /* Nuevo estilo ventana bienvenida */
    .modal {
      display: flex;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(44,29,75,0.75);
      align-items: center;
      justify-content: center;
    }
    .modal-contenido {
      background: white;
      padding: 40px 35px 50px;
      border-radius: 32px;
      max-width: 420px;
      width: 90vw;
      box-shadow: 0 12px 40px rgba(123,31,162,0.25);
      text-align: center;
      position: relative;
      user-select: none;
      z-index: 1001;
    }
    .cerrar {
      position: absolute;
      top: 12px; right: 14px;
      background: #ab47bc;
      border-radius: 50%;
      color: white;
      font-size: 28px;
      border: none;
      width: 40px; height: 40px;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(123,31,162,0.35);
      transition: background 0.3s ease;
      z-index: 1002;
    }
    .cerrar:hover {
      background: #7b1fa2;
    }
    /* Bot√≥n Ayuda */
    #btn-ayuda {
      display: none;
      background: linear-gradient(135deg, #7b1fa2, #ab47bc);
      color: white;
      border: none;
      border-radius: 24px;
      padding: 12px 24px;
      font-size: 18px;
      font-weight: 900;
      box-shadow: 0 6px 18px rgba(123, 31, 162, 0.7);
      cursor: pointer;
      user-select: none;
      position: fixed;
      bottom: 24px;
      right: 24px;
      transition: background 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
      z-index: 1100;
    }
    #btn-ayuda:hover {
      background: linear-gradient(135deg, #9c27b0, #ce93d8);
      box-shadow: 0 8px 22px rgba(156, 39, 176, 1);
      transform: scale(1.08);
    }
    #btn-ayuda:active {
      transform: scale(0.95);
    }
    /* Modal Ayuda centrado con flexbox */
    #modal-ayuda {
      display: none;
      position: fixed;
      z-index: 1000;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(44,29,75,0.75);
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
  <h1>Quizmania</h1>
  <div>
    <button class="boton-categoria" style="background-color: #00796b;" onclick="mostrarPregunta('cafe')">Generar pregunta de la exposici√≥n</button>
  </div>
  <div id="pregunta" class="cuadro"></div>
  <div id="opciones" class="cuadro"></div>
  <div id="respuesta" class="cuadro"></div>
  <div id="confirmacion-puntos">
    <div id="mensaje-puntos"></div>
  </div>
  <footer>
    ¬© 2025 Quizmania - Todos los derechos reservados para el grupo 4
  </footer>
  <button id="btn-ayuda" onclick="abrirModal()">‚ùì Ayuda</button>

  <div id="modal-bienvenida" class="modal">
    <div class="modal-contenido">
      <button class="cerrar" onclick="cerrarBienvenida()">√ó</button>
      <div style="font-size: 48px; margin-bottom: 12px;">üéâ</div>
      <h2 style="color:#7b1fa2; margin-bottom: 20px;">¬°Bienvenido a Quizmania!</h2>
      <p style="font-size: 18px; font-weight: 700; color:#4a148c; line-height: 1.5; margin-bottom: 24px;">
        Desaf√≠a a mas jugadores y aprende mientras te diviertes.<br>
        Genera tu pregunta y empieza a jugar perraaaaa!!<br>
        (toca el boton de ayuda para informacion de como mejorar tu experiencia)
      </p>
      <button onclick="cerrarBienvenida()" style="
        background: linear-gradient(135deg, #7b1fa2, #ab47bc);
        color: white;
        border: none;
        border-radius: 32px;
        padding: 16px 48px;
        font-size: 22px;
        font-weight: 900;
        box-shadow: 0 8px 26px rgba(123,31,162,0.8);
        cursor: pointer;
        user-select: none;
        transition: background 0.3s ease;
      "
      onmouseover="this.style.background='linear-gradient(135deg, #9c27b0, #ce93d8)';"
      onmouseout="this.style.background='linear-gradient(135deg, #7b1fa2, #ab47bc)';">
        Comenzar a jugar
      </button>
    </div>
  </div>

  <div id="modal-no-mas-preguntas" class="modal" style="display:none;">
    <div class="modal-contenido" tabindex="0">
      <button class="cerrar" onclick="cerrarNoMasPreguntas()">√ó</button>
      <div style="font-size: 48px; margin-bottom: 12px;">‚ùó</div>
      <h2 style="color:#7b1fa2; margin-bottom: 20px;">¬°Fin del juego!</h2>
      <p id="texto-fin-juego" style="font-size: 18px; font-weight: 700; color:#4a148c; line-height: 1.5; margin-bottom: 24px;">
        Ya no hay m√°s preguntas disponibles en esta categor√≠a.<br>
        El juego termina de inmediato.<br>
        ¬°Gracias por jugar!
      </p>
      <button onclick="cerrarNoMasPreguntas()" style="
        background: linear-gradient(135deg, #7b1fa2, #ab47bc);
        color: white;
        border: none;
        border-radius: 32px;
        padding: 16px 48px;
        font-size: 22px;
        font-weight: 900;
        box-shadow: 0 8px 26px rgba(123,31,162,0.8);
        cursor: pointer;
        user-select: none;
        transition: background 0.3s ease;
      "
      onmouseover="this.style.background='linear-gradient(135deg, #9c27b0, #ce93d8)';"
      onmouseout="this.style.background='linear-gradient(135deg, #7b1fa2, #ab47bc)';">
        Cerrar
      </button>
    </div>
  </div>

  <div id="modal-ayuda" class="modal" style="display:none;">
    <div class="modal-contenido">
      <span class="cerrar" onclick="cerrarModal()">&times;</span>
      <p>
        üì± Para una mejor experiencia de juego, te recomendamos activar la vista de escritorio: En la parte superior del navegador (los tres puntos), selecciona "Sitio para computadora" luego pon el celular en horizontal y listo!<br><br>
        ‚¨áÔ∏è Para continuar, elige una categor√≠a y responde las preguntas.<br><br>
        ‚úîÔ∏è Selecciona una opci√≥n y autom√°ticamente aparecer√° la respuesta y el puntaje.<br><br>
        üí° ¬°Divi√©rtete y aprende mucho!
      </p>
    </div>
  </div>

  <script>
    const preguntas = {
      cafe: [
         {
      pregunta: "¬øCu√°l es el n√∫mero recomendado de participantes para detectar la mayor√≠a de problemas de usabilidad?",
      opciones: ["a) 2 personas", "b) 5 a 7 personas", "c) 15 personas"],
      correcta: "b"
    },
    {
      pregunta: "En la bienvenida de la sesi√≥n, ¬øqu√© se debe aclarar al usuario?",
      opciones: [
        "a) Que el producto no se va a evaluar",
        "b) Que se eval√∫a al usuario",
        "c) Que se eval√∫a el producto, no al usuario"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øC√≥mo deben estar planteadas las tareas para los usuarios?",
      opciones: [
        "a) Como instrucciones paso a paso",
        "b) Como metas concretas",
        "c) Como preguntas abiertas"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© se debe pedir antes de grabar la sesi√≥n?",
      opciones: [
        "a) Consentimiento del participante",
        "b) Tiempo disponible del participante",
        "c) Dispositivo del participante"
      ],
      correcta: "a"
    },
    {
      pregunta: "¬øCu√°l es uno de los principales objetivos del an√°lisis de resultados?",
      opciones: [
        "a) Clasificar problemas por nivel de gravedad",
        "b) Calcular el costo del producto",
        "c) Definir el n√∫mero de descargas esperadas"
      ],
      correcta: "a"
    },
    {
      pregunta: "Seg√∫n Torres Burdiel, ¬øqu√© ocurre si se hacen pruebas con usuarios demasiado tarde?",
      opciones: [
        "a) Se evitan costos de tiempo y dinero",
        "b) Los errores se descubren muy tarde y son m√°s costosos de corregir",
        "c) No hay diferencia en cu√°ndo se hagan"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øEn qu√© fase del desarrollo se recomienda empezar a hacer pruebas con usuarios seg√∫n el segundo enfoque?",
      opciones: [
        "a) En el lanzamiento final del producto",
        "b) Durante el prototipado",
        "c) Despu√©s de tener la versi√≥n comercial"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© se debe hacer antes de realizar pruebas con usuarios reales?",
      opciones: [
        "a) Pruebas de marketing",
        "b) Revisi√≥n experta de usabilidad",
        "c) Medici√≥n de descargas esperadas"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© ventaja tiene testear en la fase de prototipado?",
      opciones: [
        "a) Permite disminuir tiempo e inversi√≥n de dinero",
        "b) Permite vender el producto m√°s r√°pido",
        "c) Evita la necesidad de redise√±os futuros"
      ],
      correcta: "a"
    },
    {
      pregunta: "¬øQu√© se logra al combinar una revisi√≥n experta de usabilidad con un test con usuarios?",
      opciones: [
        "a) Detectar solo errores b√°sicos",
        "b) Obtener una soluci√≥n m√°s completa",
        "c) Reducir la necesidad de retroalimentaci√≥n"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© diferencia a una prueba de usabilidad de una simple encuesta?",
      opciones: [
        "a) Que se hace con m√°s personas",
        "b) Que es un experimento pr√°ctico para evaluar si el sitio funciona bien",
        "c) Que solo se aplican preguntas abiertas"
      ],
      correcta: "b"
    },
    {
      pregunta: "Seg√∫n Yusef Hassan Montero, un test con usuarios se basa principalmente en:",
      opciones: [
        "a) La opini√≥n de los dise√±adores",
        "b) La observaci√≥n y an√°lisis de c√≥mo un grupo de usuarios reales utiliza el sitio",
        "c) La revisi√≥n t√©cnica del c√≥digo"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øPor qu√© es importante la observaci√≥n en las pruebas de usabilidad?",
      opciones: [
        "a) Porque preguntar es suficiente para detectar problemas",
        "b) Porque permite ver c√≥mo act√∫a el usuario en la pr√°ctica",
        "c) Porque reemplaza a las entrevistas con expertos"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øCon qui√©nes deben hacerse las pruebas de usabilidad?",
      opciones: [
        "a) Con los dise√±adores de la p√°gina",
        "b) Con usuarios reales representativos del p√∫blico objetivo",
        "c) Con programadores del equipo de desarrollo"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øCu√°l es el objetivo final de identificar problemas de uso en un test con usuarios?",
      opciones: [
        "a) Documentar las dificultades sin cambiarlas",
        "b) Medir la cantidad de usuarios que ingresan al sitio",
        "c) Solucionar los problemas y mejorar la interfaz"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øCu√°l es la idea central del enfoque coercitivo al decidir cu√°ndo hacer test con usuarios?",
      opciones: [
        "a) Esperar hasta que el producto est√© terminado para tener una visi√≥n completa.",
        "b) Hacer las pruebas lo antes posible, porque mientras m√°s se tarde, m√°s costoso ser√° corregir los errores.",
        "c) No hacer pruebas con usuarios, solo revisiones de expertos.",
        "d) Realizar pruebas √∫nicamente en el momento del lanzamiento oficial."
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© plantea el enfoque en prototipado?",
      opciones: [
        "a) Hacer pruebas con usuarios √∫nicamente en la versi√≥n final del producto.",
        "b) Ignorar los prototipos y concentrarse en el producto final.",
        "c) Realizar pruebas durante las fases tempranas, usando prototipos, para ahorrar tiempo y dinero.",
        "d) Dejar que los usuarios descubran los errores despu√©s del lanzamiento."
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øPor qu√© es recomendable hacer primero una revisi√≥n experta de usabilidad antes de un test con usuarios?",
      opciones: [
        "a) Porque los usuarios no pueden detectar errores importantes.",
        "b) Porque permite corregir los fallos m√°s b√°sicos antes de pasar a pruebas m√°s detalladas.",
        "c) Porque reemplaza la necesidad de hacer test con usuarios.",
        "d) Porque es m√°s barato que probar con usuarios y ya no ser√≠a necesario testear despu√©s."
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© conclusi√≥n plantea Torres Burriel sobre el momento ideal para hacer test con usuarios?",
      opciones: [
        "a) Siempre al final, cuando el producto ya est√° terminado.",
        "b) Solo cuando los inversores lo soliciten.",
        "c) Lo m√°s pronto posible, en fases tempranas, despu√©s de una revisi√≥n experta de usabilidad.",
        "d) Nunca, porque basta con que los dise√±adores decidan."
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øQu√© permite observar un test con usuarios?",
      opciones: [
        "a) Las opiniones generales del p√∫blico",
        "b) La cantidad de visitas al sitio web",
        "c) C√≥mo interact√∫an personas reales con un sitio web",
        "d) El dise√±o gr√°fico del sitio"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øPor qu√© los dise√±adores o desarrolladores no siempre detectan los problemas de uso?",
      opciones: [
        "a) Porque no conocen bien el producto",
        "b) Porque no tienen tiempo para probarlo",
        "c) Porque est√°n demasiado familiarizados con el producto",
        "d) Porque no les interesa la usabilidad"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øCu√°l de las siguientes afirmaciones describe mejor una prueba de usabilidad?",
      opciones: [
        "a) Es una encuesta de satisfacci√≥n al cliente",
        "b) Es una opini√≥n grupal sobre el dise√±o",
        "c) Es un experimento pr√°ctico para evaluar el funcionamiento del sitio",
        "d) Es una sesi√≥n de capacitaci√≥n sobre el sitio"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øQu√© papel cumple la observaci√≥n en un test con usuarios?",
      opciones: [
        "a) Es secundaria frente a los datos estad√≠sticos",
        "b) Es el centro del test, ya que permite ver c√≥mo act√∫a el usuario en la pr√°ctica",
        "c) Solo sirve para verificar los resultados de las encuestas",
        "d) Ayuda a medir la velocidad del sitio"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øPor qu√© es importante que los usuarios del test sean personas reales?",
      opciones: [
        "a) Porque aportan ideas nuevas de dise√±o",
        "b) Porque no est√°n involucradas en el desarrollo y representan al p√∫blico objetivo",
        "c) Porque saben c√≥mo funciona la interfaz",
        "d) Porque son m√°s econ√≥micos que los expertos"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øCu√°l es el objetivo principal de un test con usuarios?",
      opciones: [
        "a) Comprobar si el sitio tiene errores de c√≥digo",
        "b) Descubrir obst√°culos o dificultades en la experiencia del usuario",
        "c) Validar los gustos est√©ticos del equipo de dise√±o",
        "d) Medir la cantidad de clics que se hacen en el sitio"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© se debe hacer despu√©s de detectar los problemas de uso en un test con usuarios?",
      opciones: [
        "a) Cambiar todo el dise√±o del sitio",
        "b) Hacer una encuesta para confirmar los resultados",
        "c) Aplicar lo aprendido para mejorar la interfaz",
        "d) Publicar los errores encontrados en redes sociales"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øCu√°l es el prop√≥sito principal de un test con usuarios?",
      opciones: [
        "a) Evaluar al usuario y su conocimiento tecnol√≥gico",
        "b) Descubrir errores de programaci√≥n en el c√≥digo",
        "c) Evaluar el producto, ver si es f√°cil de usar y qu√© se puede mejorar",
        "d) Medir la cantidad de descargas de la aplicaci√≥n"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øCu√°l es el primer paso en la planificaci√≥n de un test con usuarios?",
      opciones: [
        "a) Seleccionar las herramientas de grabaci√≥n",
        "b) Definir el objetivo del test",
        "c) Registrar el tiempo de las tareas",
        "d) Dise√±ar las preguntas finales"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© n√∫mero de participantes se recomienda para detectar la mayor√≠a de problemas de usabilidad?",
      opciones: [
        "a) 2 a 3 personas",
        "b) 5 a 7 personas",
        "c) 10 a 15 personas",
        "d) M√°s de 20 personas"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øC√≥mo deben estar planteadas las tareas para los participantes?",
      opciones: [
        "a) Como instrucciones paso a paso detalladas",
        "b) Como metas concretas que deben lograr",
        "c) Como preguntas abiertas sin objetivos",
        "d) Como encuestas de satisfacci√≥n"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© se debe aclarar al usuario en la bienvenida de la sesi√≥n?",
      opciones: [
        "a) Que se evaluar√° su desempe√±o individual",
        "b) Que se eval√∫a al producto, no al usuario",
        "c) Que no debe cometer errores",
        "d) Que la prueba durar√° m√°s de una hora"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© aspectos se deben registrar durante la realizaci√≥n del test?",
      opciones: [
        "a) Solo los comentarios de los participantes",
        "b) El n√∫mero de descargas de la app",
        "c) Tiempo, √©xito o fracaso en las tareas, errores y emociones expresadas",
        "d) Los dise√±os gr√°ficos m√°s atractivos"
      ],
      correcta: "c"
    },
    {
      pregunta: "¬øC√≥mo se deben clasificar los problemas detectados en el an√°lisis de resultados?",
      opciones: [
        "a) Seg√∫n la opini√≥n del dise√±ador",
        "b) Por nivel de gravedad (cr√≠tico, medio, leve)",
        "c) Seg√∫n el tiempo disponible para corregirlos",
        "d) Seg√∫n la edad de los participantes"
      ],
      correcta: "b"
    },
    {
      pregunta: "¬øQu√© debe incluir el informe final del test con usuarios?",
      opciones: [
        "a) Solo los nombres de los participantes y sus edades",
        "b) Objetivo, participantes, tareas, falencias principales y recomendaciones",
        "c) Los gustos est√©ticos de los dise√±adores",
        "d) El presupuesto de marketing del producto"
      ],
      correcta: "b"
    }
      ]
    };

    let preguntaActual = null;
    let categoriaActual = null;
    let opcionSeleccionada = null;
    let puntuacionTotal = 0;

    // Para manejar las preguntas barajadas y el √≠ndice actual
    let preguntasBarajadas = [];
    let indicePreguntaActual = 0;

    let timerInterval = null;
    let tiempoRestante = 30;
    let tiempoAcabado = false;

    const ticTacAudio = new Audio('audio/popis.mp3');

    // Funci√≥n para barajar array (Fisher-Yates)
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function stopTemporizadorYAudio() {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
      ticTacAudio.pause();
      ticTacAudio.currentTime = 0;
      const temp = document.getElementById('temporizador');
      if (temp) temp.style.display = 'none';
    }

    function mostrarFinJuego() {
      stopTemporizadorYAudio();
      const modal = document.getElementById('modal-no-mas-preguntas');
      modal.style.display = 'flex';

      const textoFin = document.getElementById('texto-fin-juego').innerText;
      narrarTexto(textoFin, false);
    }

    function mostrarPregunta(cat) {
      stopTemporizadorYAudio();

      // Si categor√≠a cambi√≥ o estamos comenzando, barajar preguntas
      if (categoriaActual !== cat || preguntasBarajadas.length === 0) {
        categoriaActual = cat;
        preguntasBarajadas = shuffleArray([...preguntas[cat]]);
        indicePreguntaActual = 0;
      }

      if (indicePreguntaActual >= preguntasBarajadas.length) {
        mostrarFinJuego();
        return;
      }

      preguntaActual = preguntasBarajadas[indicePreguntaActual];
      indicePreguntaActual++;

      document.getElementById('pregunta').textContent = preguntaActual.pregunta;
      mostrarOpciones(preguntaActual.opciones);
      document.getElementById('respuesta').textContent = "";
      document.getElementById('confirmacion-puntos').style.display = "none";
      document.getElementById('mensaje-puntos').textContent = "";
      opcionSeleccionada = null;
      tiempoAcabado = false;
      bloquearOpciones(false);

      const temp = document.getElementById('temporizador');
      if (temp) temp.style.display = 'none';

      narrarTexto(preguntaActual.pregunta, true);
    }

    function mostrarOpciones(opciones) {
      const contenedorOpciones = document.getElementById('opciones');
      contenedorOpciones.innerHTML = "";
      opciones.forEach((opcion, i) => {
        const div = document.createElement('div');
        div.classList.add('opcion');
        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = 'opcion';
        radio.id = `opcion${i}`;
        radio.value = opcion.charAt(0);
        radio.onclick = () => {
          opcionSeleccionada = radio.value;
          mostrarRespuestaInstantanea();
        };
        const label = document.createElement('label');
        label.htmlFor = `opcion${i}`;
        label.textContent = opcion;
        div.appendChild(radio);
        div.appendChild(label);
        contenedorOpciones.appendChild(div);
      });
    }

    function mostrarRespuestaInstantanea() {
      if (!preguntaActual || !opcionSeleccionada) return;

      stopTemporizadorYAudio();

      const esCorrecta = (opcionSeleccionada === preguntaActual.correcta);
      const respuestaTexto = esCorrecta
        ? `¬°Respuesta correcta! Es ${preguntaActual.opciones.find(op => op.charAt(0) === preguntaActual.correcta).slice(3)}.`
        : `Respuesta incorrecta. La respuesta correcta es ${preguntaActual.opciones.find(op => op.charAt(0) === preguntaActual.correcta).slice(3)}.`;
      document.getElementById('respuesta').textContent = respuestaTexto;
      document.getElementById('confirmacion-puntos').style.display = "block";
      document.getElementById('mensaje-puntos').textContent = "";
      narrarTexto(respuestaTexto, false);
      respuestaUsuario(esCorrecta);
      bloquearOpciones(true);
    }

    function respuestaUsuario(acertado) {
      if (!preguntaActual) return;
      const mensaje = document.getElementById('mensaje-puntos');
      if (acertado) {
        puntuacionTotal += 100;
        mensaje.style.color = '#1b5e20';
        const texto = `¬°Genial! Has ganado 100 puntos. Puntaje total: ${puntuacionTotal} puntos.`;
        mensaje.textContent = texto;
        narrarTexto(texto, false);
      } else {
        puntuacionTotal -= 50;
        mensaje.style.color = '#b71c1c';
        const texto = `Oh no, perdiste 50 puntos. Puntaje total: ${puntuacionTotal} puntos.`;
        mensaje.textContent = texto;
        narrarTexto(texto, false);
      }
    }

    function bloquearOpciones(bloquear) {
      const radios = document.querySelectorAll('#opciones input[type="radio"]');
      radios.forEach(radio => {
        radio.disabled = bloquear;
      });
    }

    function narrarTexto(texto, esPregunta = false) {
      if ('speechSynthesis' in window) {
        speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(texto);
        utterance.lang = 'es-ES';
        utterance.onend = () => {
          if (preguntaActual && esPregunta && !tiempoAcabado) {
            iniciarTemporizador();
          }
        };
        speechSynthesis.speak(utterance);
      } else {
        if (esPregunta) {
          iniciarTemporizador();
        }
      }
    }

    function iniciarTemporizador() {
      stopTemporizadorYAudio();

      tiempoRestante = 30;
      tiempoAcabado = false;
      let contenedorTemporizador = document.getElementById('temporizador');
      if (!contenedorTemporizador) {
        contenedorTemporizador = document.createElement('div');
        contenedorTemporizador.id = 'temporizador';
        contenedorTemporizador.style.fontSize = '20px';
        contenedorTemporizador.style.color = '#b71c1c';
        contenedorTemporizador.style.marginTop = '10px';
        contenedorTemporizador.style.fontWeight = '700';
        contenedorTemporizador.style.userSelect = 'none';
        const preguntaDiv = document.getElementById('pregunta');
        preguntaDiv.appendChild(contenedorTemporizador);
      }
      contenedorTemporizador.style.display = 'block';
      contenedorTemporizador.textContent = `${tiempoRestante} segundos para responder`;

      timerInterval = setInterval(() => {
        if (tiempoRestante > 0) {
          tiempoRestante--;
          contenedorTemporizador.textContent = `${tiempoRestante} segundos para responder`;

          if (ticTacAudio.paused) {
            ticTacAudio.currentTime = 0;
            ticTacAudio.play().catch(e => {});
          }
        } else {
          clearInterval(timerInterval);
          timerInterval = null;
          contenedorTemporizador.textContent = "Tiempo agotado, pierdes 50 puntos.";
          tiempoAcabado = true;
          manejarTiempoAgotado();
        }
      }, 1000);
    }

    function manejarTiempoAgotado() {
      if (preguntaActual && opcionSeleccionada === null) {
        puntuacionTotal -= 50;
        document.getElementById('mensaje-puntos').style.color = '#b71c1c';
        const texto = `Oh no, perdiste 50 puntos. Puntaje total: ${puntuacionTotal} puntos.`;
        document.getElementById('mensaje-puntos').textContent = texto;
        document.getElementById('confirmacion-puntos').style.display = "block";
        narrarTexto(texto, false);
        bloquearOpciones(true);
      }
    }

    function abrirModal() {
      document.getElementById('modal-ayuda').style.display = 'flex';
    }

    function cerrarModal() {
      document.getElementById('modal-ayuda').style.display = 'none';
    }

    function cerrarBienvenida() {
      document.getElementById('modal-bienvenida').style.display = 'none';
      document.getElementById('btn-ayuda').style.display = 'inline-block';
    }

    function cerrarNoMasPreguntas() {
      document.getElementById('modal-no-mas-preguntas').style.display = 'none';
    }

    window.onload = function() {
      document.getElementById('modal-bienvenida').style.display = 'flex';
      document.getElementById('btn-ayuda').style.display = 'none';
    };
  </script>
</body>
</html>


